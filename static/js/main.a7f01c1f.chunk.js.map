{"version":3,"sources":["context/Context.js","context/Consumer.js","components/Canvas/getSize.js","components/Canvas/Canvas.jsx","components/Spectrogram/element.jsx","components/FileUploader/Uploader.jsx","components/FileDownloader/Downloader.jsx","components/PlaybackCtrl/PlaybackCtrl.jsx","components/FileList/FileList.jsx","components/GridSystem/index.js","components/GridSystem/Grid.jsx","components/GridSystem/GridItem.jsx","AudioStream/index.js","App.js","index.js"],"names":["Context","Component","React","createContext","parseNumber","prop","parseFloat","getSize","el","window","document","body","innerWidth","innerHeight","temporary","parentNode","appendChild","rect","getBoundingClientRect","styles","getComputedStyle","height","getPropertyValue","width","removeChild","ResponsiveCanvas","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleResize","_assertThisInitialize","assertThisInitialized","_this$state","ctx","canvas","state","setState","objectSpread","setSize","props","canvasApp","parent","parentElement","_getSize","_getSize2","slicedToArray","setRef","createRef","canvasRef","_this2","addEventListener","getContext","_this2$state","init","removeEventListener","scale","devicePixelRatio","_this$state2","react_default","a","createElement","ref","style","border","Canvas","Canvas_ResponsiveCanvas","_this3","Spectrogram","nextProps","streamData","fillStyle","fillRect","slice","getImageData","draw","cancelAnimationFrame","animationLoop","x","y","imageData","scaled","createImageData","row","col","sourcePixel","data","destRow","destCol","i","arguments","length","undefined","requestAnimationFrame","sliceData","putImageData","scaleImageData","Canvas_Canvas","transform","Uploader","handleUpload","reader","loading","Audio","file","files","readAsDataURL","src","onloadend","result","onUploadSuccess","name","FileReader","Fragment","tooltip","title","es_button","size","shape","icon","onClick","click","accept","type","display","onChange","Downloader","assign","PlaybackCtrl","isPlaying","handlePlayback","FileList","handleSelect","selectedFile","dataSource","list","header","justifyContent","Uploader_Uploader","PlaybackCtrl_PlaybackCtrl","disabled","Downloader_Downloader","spin","textAlign","marginTop","bordered","renderItem","Item","block","margin","Meta","avatar","GridSystem","GridStyles","gridTemplateColumns","concat","cols","gridTemplateRows","rows","className","Children","map","children","id","cloneElement","GridItemStyles","rowStart","gridRowStart","rowEnd","gridRowEnd","colStart","gridColumnStart","colEnd","gridColumnEnd","AudioStream","play","bind","getStreamData","actx","console","log","AudioContext","webkitAudioContext","e","checkContext","analyser","createAnalyser","dataArray","Uint8Array","frequencyBinCount","source","createMediaElementSource","fftSize","minDecibels","maxDecibels","connect","destination","analyserLoop","getByteFrequencyData","pause","currentTime","Grid","GridItem","App","handleStreamData","index","stop","Streamer","fromElement","_this4","App_Grid","App_GridItem","element_Spectrogram","FileList_FileList","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.a7f01c1f.chunk.js","sourcesContent":["import React from 'react';\n\nconst Context = React.createContext();\n\nexport { Context };\n","import React, { Component } from 'react';\nimport { Context } from './';\n\nclass Consumer extends Component {\n  render() {\n    const { children } = this.props;\n\n    return (\n      <Context.Consumer>\n        {(props) => React.Children.map(children, (child) => React.cloneElement(child, { ...props }))}\n      </Context.Consumer>\n    );\n  }\n}\n\nexport { Consumer };\n","const parseNumber = prop => parseFloat(prop) || 0;\n\nconst getSize = (el) => {\n  if (el === window || el === document.body) {\n    return [window.innerWidth, window.innerHeight];\n  }\n\n  let temporary = false;\n\n  if (!el.parentNode && document.body) {\n    temporary = true;\n    document.body.appendChild(el);\n  }\n\n  const rect = el.getBoundingClientRect();\n  const styles = getComputedStyle(el);\n  const height =\n    (rect.height | 0) +\n    parseNumber(styles.getPropertyValue('margin-top')) +\n    parseNumber(styles.getPropertyValue('margin-bottom'));\n  const width =\n    (rect.width | 0) +\n    parseNumber(styles.getPropertyValue('margin-left')) +\n    parseNumber(styles.getPropertyValue('margin-right'));\n\n  if (temporary && document.body) {\n    document.body.removeChild(el);\n  }\n\n  return [width, height];\n};\n\nexport default getSize;","import React, { Component } from 'react';\nimport getSize from './getSize';\n\nclass ResponsiveCanvas extends Component {\n    constructor() {\n        super();\n        this.state = {\n            width: 0,\n            height: 0\n        };\n    }\n    componentDidMount() {\n        this.setState({ ...this.setSize() }, () => {\n            window.addEventListener('resize', this.handleResize, false);\n            this.ctx = this.canvas.getContext('2d');\n            const { ctx, canvas } = this;\n            const { width, height } = this.state;\n            this.props.canvasApp.init(ctx, canvas, width, height);\n        });\n    }\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.handleResize, false);\n    }\n    handleResize = () => {\n        const { ctx, canvas } = this;\n        const { width, height } = this.state;\n        this.setState({ ...this.setSize() }, () => {\n            this.props.canvasApp.setSize(width, height)\n            // Add custom events with this.props.onResize();\n        });\n    }\n    setSize = () => {\n        const parent = this.canvas.parentElement;\n        if (!parent) return;\n        const [width, height] = getSize(parent);\n        return { width, height };\n    }\n    setRef = (el) => {\n        if (!el) return\n        const { createRef } = this.props;\n        this.canvas = el;\n        if (typeof canvasRef === 'function') {\n            createRef(el);\n        }\n    };\n    render() {\n        const scale = window.devicePixelRatio || 1;\n        const { width, height } = this.state;\n        return (\n            <canvas\n                ref={this.setRef}\n                width={width * scale}\n                height={height * scale}\n                style={{ width, height, ...this.props.style, border: '1px solid' }}\n            />\n        )\n    }\n}\n\nconst Canvas = (props) => {\n    return (\n        <ResponsiveCanvas\n            style={{ ...props.style, }}\n            canvasRef={el => { this.canvas = el }}\n            canvasApp={props.canvasApp}\n        />\n    )\n}\n\n\nexport { Canvas };","import React, { Component } from 'react';\nimport { Canvas } from '../Canvas';\n// import { Spectrogram as Sonogram } from './app';\n\n\n\nclass Spectrogram extends Component {\n    constructor() {\n        super();\n    }\n    shouldComponentUpdate(nextProps) {\n        if (nextProps.streamData) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n    init(ctx, canvas, width, height) {\n        this.ctx = ctx;\n        this.canvas = canvas;\n        this.canvas.width = width;\n        this.canvas.height = height;\n        this.ctx.fillStyle = 'black';\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        this.slice = this.ctx.getImageData(0, 0, 1, this.canvas.height);\n        this.draw();\n    }\n    setSize(width, height) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n        cancelAnimationFrame(this.animationLoop);\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);      \n        this.slice = this.ctx.getImageData(0, 0, 1, this.canvas.height);\n        this.draw(this.x, this.y);\n    }\n    scaleImageData(imageData, scale) {\n        var scaled = this.ctx.createImageData(imageData.width * scale, imageData.height * scale);\n        for (var row = 0; row < imageData.height; row++) {\n            for (var col = 0; col < imageData.width; col++) {\n                var sourcePixel = [\n                    imageData.data[(row * imageData.width + col) * 4 + 0],\n                    imageData.data[(row * imageData.width + col) * 4 + 1],\n                    imageData.data[(row * imageData.width + col) * 4 + 2],\n                    imageData.data[(row * imageData.width + col) * 4 + 3]\n                ];\n                for (var y = 0; y < scale; y++) {\n                    var destRow = row * scale + y;\n                    for (var x = 0; x < scale; x++) {\n                        var destCol = col * scale + x;\n                        for (var i = 0; i < 4; i++) {\n                            scaled.data[(destRow * scaled.width + destCol) * 4 + i] =\n                                sourcePixel[i];\n                        }\n                    }\n                }\n            }\n        }\n\n        return scaled;\n    }\n    draw(x = 0, y = 0) {\n        const { ctx, props, canvas, slice } = this;\n        const { width, height } = canvas;\n        const { streamData } = props;\n        this.animationLoop = requestAnimationFrame(() => {\n            if (x > width) x = 0;\n            this.x = x;\n            this.y = y;\n            x = x + 1;\n            this.draw(x, y);\n        });\n        let sliceData = slice.data;\n        for (let i = 0; i < sliceData.length; i += 4) {\n            if (streamData) {\n                // Main\n                sliceData[i] = streamData[i]\n                sliceData[i + 1] = streamData[i + 1]\n                sliceData[i + 2] = streamData[i + 2]\n\n            } else {\n                // Standby\n                sliceData[i] = 0;\n                sliceData[i + 1] = 0;\n                sliceData[i + 2] = 0;\n            }\n        }\n        ctx.putImageData(this.scaleImageData(slice, 2), x, y, 0, 0, canvas.width, canvas.height);\n    }\n    render() {\n        return (\n            <Canvas style={{ transform: 'rotate(180deg) scaleX(-1)' }} canvasRef={el => { this.canvas = el }} canvasApp={this} />\n        )\n    }\n}\n\n\n\n\nexport { Spectrogram };","\nimport React, { Component } from 'react';\nimport { Button, Tooltip } from 'antd';\n\nclass Uploader extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false\n    }\n    this.reader = new FileReader();\n  }\n  handleUpload = () => {\n    const { props, reader } = this;\n    this.setState({ loading: true });\n    const el = new Audio();\n    const file = this.el.files[0];\n    if (file) {\n      reader.readAsDataURL(file);\n    } else {\n      el.src = \"\";\n    }\n    reader.onloadend = () => {\n      el.src = reader.result;\n      props.onUploadSuccess({ name: file.name, el });\n      this.setState({ loading: false });\n    }\n  }\n  render() {\n    const { state } = this;\n    return (\n      <React.Fragment>\n        <Tooltip title='upload audio'>\n          <Button\n            size='small'\n            shape='circle'\n            icon='upload'\n            loading={state.loading}\n            onClick={() => this.el.click()}\n          />\n        </Tooltip>\n        <input\n          accept='audio/*'\n          ref={el => this.el = el} type=\"file\" style={{ display: 'none' }}\n          onChange={() => this.handleUpload()}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\nexport { Uploader }","import React from 'react';\nimport { Button, Tooltip } from 'antd';\n\nexport const Downloader = (props) => {\n    return (\n        <Tooltip title='download image'>\n            <Button\n                {...props}\n                size='small'\n                shape='circle'\n                icon='download'\n            />\n        </Tooltip>\n    )\n}","import React from 'react';\nimport { Button, Tooltip } from 'antd';\n\nexport const PlaybackCtrl = (props) => {\n    return (\n        <Tooltip title={props.isPlaying ? 'pause' : 'play'}>\n            <Button\n                {...props}\n                size='small'\n                shape='circle'\n                icon={props.isPlaying ? 'pause-circle' : 'play-circle'}\n                onClick={props.handlePlayback}\n            />\n        </Tooltip>\n    )\n}","import React from 'react';\nimport { Uploader, Downloader, PlaybackCtrl } from '../';\nimport { List, Button, Icon } from 'antd';\nimport { Spin } from 'antd';\n\nexport const FileList = (props) => {\n    const {\n        onUploadSuccess,\n        handleSelect,\n        handlePlayback,\n        isPlaying,\n        selectedFile,\n        dataSource\n    } = props;\n    return (\n        <List\n            style={props.style}\n            header={\n                <div>\n                    <div style={{ display: 'flex', justifyContent: 'space-evenly' }}>\n                        <Uploader onUploadSuccess={onUploadSuccess} />\n                        <PlaybackCtrl\n                            disabled={!selectedFile}\n                            handlePlayback={handlePlayback}\n                            isPlaying={isPlaying}\n                        />\n                        <Downloader />\n                        { props.loading ? <Spin /> : null }\n                    </div>\n                    {selectedFile ? <div style={{ textAlign: 'center', marginTop: '2%' }}><Icon type='sound' /> {selectedFile.name}</div> : null}\n                </div>\n            }\n            bordered\n            dataSource={dataSource}\n            renderItem={file => (\n                <List.Item>\n                    <Button\n                        block\n                        style={{ margin: '0 auto' }}\n                        onClick={() => handleSelect(file)}>\n                        <List.Item.Meta\n                            avatar={<img width={25} height={25} src=\"https://www.svgrepo.com/show/8210/musical-notes.svg\" />}\n                            title={file.name}\n                        />\n                    </Button>\n                </List.Item>\n            )}\n        />\n    )\n}","import { Grid } from './Grid';\nimport { GridItem } from './GridItem';\nexport const GridSystem = { Grid, GridItem };","import React from 'react';\n\nexport const Grid = (props) => {\n    const GridStyles = {\n        display: 'grid',\n        gridTemplateColumns: `repeat(${props.cols}, 1fr)`,\n        gridTemplateRows: `repeat(${props.rows}, 1fr)`,\n        ...props.style,\n        // gridRowGap: props.gridRowGap,\n        // gridColumnGap: props.gridColGap,\n    }\n    const { rows, cols } = props;\n    return (\n        <div className='grid' style={GridStyles}>\n            {\n                React.Children.map(props.children, (row, id) => React.cloneElement(row, { id: id + 1, rows: rows + 1, cols: cols + 1 }))\n            }\n        </div>\n    );\n}","import React from 'react';\n\nexport const GridItem = (props) => {\n    const GridItemStyles = {\n        ...props.rowStart ? { gridRowStart: props.rowStart } : { gridRowStart: props.id },\n        ...props.rowEnd ? { gridRowEnd: props.rowEnd + 1 } : null,\n        ...props.colStart ? { gridColumnStart: props.colStart } : { gridColumnStart: 1 },\n        ...props.colEnd ? { gridColumnEnd: props.colEnd + 1 } : { gridColumnEnd: props.cols },\n        ...props.style\n    }\n    return (\n        <div style={GridItemStyles}>\n            {props.children}\n        </div>\n    );\n}","class AudioStream {\n    constructor() {\n        this.play = this.play.bind(this);\n        this.getStreamData = this.getStreamData.bind(this)\n    }\n    checkContext() {\n        if (!this.actx) {\n            try {\n                console.log('New context instantiated')\n                this.actx = new (window.AudioContext || window.webkitAudioContext)();\n            } catch (e) {\n                console.log(`Sorry, but your browser doesn't support the Web Audio API!`, e);\n            }\n        }\n    }\n    fromElement(el) {\n        this.checkContext();\n        const { actx } = this;\n        try {\n            this.analyser = actx.createAnalyser();\n            this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n            this.source = actx.createMediaElementSource(el);\n\n            const { analyser, source } = this;\n            analyser.fftSize = 16384;\n            analyser.minDecibels = -120;\n            analyser.maxDecibels = -15;\n\n            analyser.connect(actx.destination);\n            source.connect(this.analyser);\n\n            return this.source;\n        } catch (e) {\n            console.log('Failed to make stream: ', e);\n        }\n    }\n    play(el) {\n        el.play();\n        this.getStreamData();\n    }\n    getStreamData() {\n        this.analyserLoop = requestAnimationFrame(this.getStreamData);\n        this.analyser.getByteFrequencyData(this.dataArray)\n        return this.dataArray;\n    }\n    stop(el) {\n        el.pause();\n        el.currentTime = 0;\n        cancelAnimationFrame(this.analyserLoop);\n    }\n}\n\nexport { AudioStream }","import React, { Component } from 'react';\nimport { Provider } from './context';\nimport { Spectrogram, FileList, GridSystem } from './components';\nimport { AudioStream as Streamer } from './AudioStream';\nconst { Grid, GridItem } = GridSystem;\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      files: [],\n      isPlaying: false\n    }\n    this.onUploadSuccess = this.onUploadSuccess.bind(this);\n    this.handlePlayback = this.handlePlayback.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.handleStreamData = this.handleStreamData.bind(this);\n  }\n  onUploadSuccess(file) {\n    this.setState({\n      files: this.state.files.concat({ ...file, index: this.state.files.length }),\n      selectedFile: this.state.selectedFile ? this.state.selectedFile : file\n    }, () => {\n      if (this.state.AudioStream && this.state.isPlaying) {\n        this.AudioStream.stop(this.state.selectedFile.el);\n        this.setState({ isPlaying: false });\n      } else {\n        const AudioStream = new Streamer();\n        this.setState({ AudioStream }, () => {\n          this.state.AudioStream.fromElement(file.el);\n        })\n      }\n    });\n  }\n  handlePlayback() {\n    const { AudioStream } = this.state;\n    const { isPlaying, selectedFile } = this.state;\n    this.setState({ isPlaying: !this.state.isPlaying }, () => {\n      if (isPlaying) {\n        cancelAnimationFrame(this.analyserLoop);\n        AudioStream.stop(selectedFile.el);\n      } else {\n        this.handleStreamData();\n        AudioStream.play(selectedFile.el)\n      }\n    });\n  }\n  handleStreamData() {\n    this.setState({ streamData: this.state.AudioStream.getStreamData() });\n    this.analyserLoop = requestAnimationFrame(this.handleStreamData);\n  }\n  handleSelect(file) {\n    if (this.state.selectedFile && this.state.selectedFile.name !== file.name) {\n      this.state.AudioStream.stop(this.state.selectedFile.el);\n      file.el.removeEventListener('pause', () => cancelAnimationFrame(this.analyserLoop))\n    }\n    this.setState({ selectedFile: file, isPlaying: false });\n    file.el.addEventListener('pause', () => cancelAnimationFrame(this.analyserLoop))\n  }\n  render() {\n    return (\n      <Grid cols={8} rows={2}>\n        <GridItem style={{ height: '50vh' }}>\n          <Spectrogram streamData={this.state.streamData} isPlaying={this.state.isPlaying} />\n        </GridItem>\n        <GridItem>\n          <FileList\n            style={{ height: '100%' }}\n            selectedFile={this.state.selectedFile}\n            onUploadSuccess={this.onUploadSuccess}\n            handlePlayback={this.handlePlayback}\n            handleSelect={this.handleSelect}\n            isPlaying={this.state.isPlaying}\n            dataSource={this.state.files}\n          />\n        </GridItem>\n      </Grid>\n    );\n  }\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'antd/dist/antd.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}