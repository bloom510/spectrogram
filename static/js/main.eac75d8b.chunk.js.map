{"version":3,"sources":["components/Canvas/getSize.js","components/Canvas/Canvas.jsx","components/Spectrogram/element.jsx","components/FileUploader/Uploader.jsx","components/FileDownloader/Downloader.jsx","components/PlaybackCtrl/PlaybackCtrl.jsx","components/FileList/FileList.jsx","components/GridSystem/index.js","components/GridSystem/Grid.jsx","components/GridSystem/GridItem.jsx","AudioStream/index.js","App.js","index.js"],"names":["parseNumber","prop","parseFloat","getSize","el","window","document","body","innerWidth","innerHeight","temporary","parentNode","appendChild","rect","getBoundingClientRect","styles","getComputedStyle","height","getPropertyValue","width","removeChild","ResponsiveCanvas","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleResize","_assertThisInitialize","assertThisInitialized","_this$state","ctx","canvas","state","setState","objectSpread","setSize","props","canvasApp","parent","parentElement","_getSize","_getSize2","slicedToArray","setRef","createRef","canvasRef","_this2","addEventListener","getContext","_this2$state","init","removeEventListener","console","log","scale","devicePixelRatio","_this$state2","react_default","a","createElement","ref","style","border","Component","Canvas","Canvas_ResponsiveCanvas","_this3","isPlaying","Spectrogram","fillStyle","fillRect","slice","getImageData","draw","cancelAnimationFrame","animationLoop","x","arguments","length","undefined","y","_this$canvas","_this$props","streamData","requestAnimationFrame","sliceData","data","i","putImageData","scaleImageData","imageData","scaled","createImageData","row","col","sourcePixel","destRow","destCol","Canvas_Canvas","transform","Uploader","handleUpload","reader","loading","Audio","file","files","readAsDataURL","src","onloadend","result","onUploadSuccess","name","FileReader","Fragment","tooltip","title","es_button","size","shape","icon","onClick","click","accept","type","display","onChange","Downloader","assign","PlaybackCtrl","handlePlayback","FileList","handleSelect","selectedFile","dataSource","list","header","justifyContent","Uploader_Uploader","PlaybackCtrl_PlaybackCtrl","disabled","Downloader_Downloader","spin","textAlign","marginTop","bordered","renderItem","Item","block","margin","Meta","avatar","GridSystem","GridStyles","gridTemplateColumns","concat","cols","gridTemplateRows","rows","className","React","Children","map","children","id","cloneElement","GridItemStyles","rowStart","gridRowStart","rowEnd","gridRowEnd","colStart","gridColumnStart","colEnd","gridColumnEnd","AudioStream","play","bind","getStreamData","actx","AudioContext","webkitAudioContext","e","checkContext","analyser","createAnalyser","dataArray","Uint8Array","frequencyBinCount","source","createMediaElementSource","fftSize","minDecibels","maxDecibels","connect","destination","push","index","getByteFrequencyData","pause","currentTime","Grid","GridItem","App","stop","handleStreamData","incoming","fromFile","analyserLoop","App_Grid","App_GridItem","element_Spectrogram","FileList_FileList","ReactDOM","render","src_App","getElementById"],"mappings":"4OAAMA,EAAc,SAAAC,GAAI,OAAIC,WAAWD,IAAS,GAgCjCE,EA9BC,SAACC,GACf,GAAIA,IAAOC,QAAUD,IAAOE,SAASC,KACnC,MAAO,CAACF,OAAOG,WAAYH,OAAOI,aAGpC,IAAIC,GAAY,GAEXN,EAAGO,YAAcL,SAASC,OAC7BG,GAAY,EACZJ,SAASC,KAAKK,YAAYR,IAG5B,IAAMS,EAAOT,EAAGU,wBACVC,EAASC,iBAAiBZ,GAC1Ba,GACW,EAAdJ,EAAKI,QACNjB,EAAYe,EAAOG,iBAAiB,eACpClB,EAAYe,EAAOG,iBAAiB,kBAChCC,GACU,EAAbN,EAAKM,OACNnB,EAAYe,EAAOG,iBAAiB,gBACpClB,EAAYe,EAAOG,iBAAiB,iBAMtC,OAJIR,GAAaJ,SAASC,MACxBD,SAASC,KAAKa,YAAYhB,GAGrB,CAACe,EAAOF,aC1BXI,cACF,SAAAA,IAAc,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,IACVC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,KAAAH,QAkBJI,aAAe,WAAM,IAAAC,EAAAP,OAAAQ,EAAA,EAAAR,CAAAD,GAAAU,GAAAF,EACTG,IADSH,EACJI,OACaZ,EAAKa,OAAvBhB,EAFSa,EAETb,MAAOF,EAFEe,EAEFf,OACfK,EAAKc,SAALb,OAAAc,EAAA,EAAAd,CAAA,GAAmBD,EAAKgB,WAAa,WACjChB,EAAKiB,MAAMC,UAAUF,QAAQnB,EAAOF,MAvB9BK,EA2BdgB,QAAU,WACN,IAAMG,EAASnB,EAAKY,OAAOQ,cAC3B,GAAKD,EAAL,CAFY,IAAAE,EAGYxC,EAAQsC,GAHpBG,EAAArB,OAAAsB,EAAA,EAAAtB,CAAAoB,EAAA,GAIZ,MAAO,CAAExB,MAJGyB,EAAA,GAII3B,OAJJ2B,EAAA,MA3BFtB,EAiCdwB,OAAS,SAAC1C,GACN,GAAKA,EAAL,CADa,IAEL2C,EAAczB,EAAKiB,MAAnBQ,UACRzB,EAAKY,OAAS9B,EACW,oBAAd4C,WACPD,EAAU3C,KApCdkB,EAAKa,MAAQ,CACThB,MAAO,EACPF,OAAQ,GAJFK,mFAOM,IAAA2B,EAAAxB,KAChBA,KAAKW,SAALb,OAAAc,EAAA,EAAAd,CAAA,GAAmBE,KAAKa,WAAa,WACjCjC,OAAO6C,iBAAiB,SAAUD,EAAKpB,cAAc,GACrDoB,EAAKhB,IAAMgB,EAAKf,OAAOiB,WAAW,MAFK,IAG/BlB,EAAgBgB,EAAhBhB,IAAKC,EAAWe,EAAXf,OAH0BkB,EAIbH,EAAKd,MAAvBhB,EAJ+BiC,EAI/BjC,MAAOF,EAJwBmC,EAIxBnC,OACfgC,EAAKV,MAAMC,UAAUa,KAAKpB,EAAKC,EAAQf,EAAOF,oDAIlDZ,OAAOiD,oBAAoB,SAAU7B,KAAKI,cAAc,oCAyBxD0B,QAAQC,IAAI/B,KAAKc,OAEjB,IAAMkB,EAAQpD,OAAOqD,kBAAoB,EAHpCC,EAIqBlC,KAAKU,MAAvBhB,EAJHwC,EAIGxC,MAAOF,EAJV0C,EAIU1C,OACf,OACI2C,EAAAC,EAAAC,cAAA,UACIC,IAAKtC,KAAKqB,OACV3B,MAAOA,EAAQsC,EACfxC,OAAQA,EAASwC,EACjBO,MAAKzC,OAAAc,EAAA,EAAAd,CAAA,CAAIJ,QAAOF,UAAWQ,KAAKc,MAAMyB,MAAjC,CAAwCC,OAAQ,uBApDtCC,aA0DzBC,EAAS,SAAC5B,GACZ,OACIqB,EAAAC,EAAAC,cAACM,EAAD,CACIJ,MAAKzC,OAAAc,EAAA,EAAAd,CAAA,GAAOgB,EAAMyB,OAClBhB,UAAW,SAAA5C,GAAQiE,EAAKnC,OAAS9B,GACjCoC,UAAWD,EAAMC,UACjB8B,UAAW/B,EAAM+B,aC7DvBC,cACF,SAAAA,IAAe,OAAAhD,OAAAC,EAAA,EAAAD,CAAAE,KAAA8C,GAAAhD,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAgD,GAAA3C,KAAAH,yEAGVQ,EAAKC,EAAQf,EAAOF,GACrBQ,KAAKQ,IAAMA,EACXR,KAAKS,OAASA,EACdT,KAAKS,OAAOf,MAAQA,EACpBM,KAAKS,OAAOjB,OAASA,EACrBQ,KAAKQ,IAAIuC,UAAY,QACrB/C,KAAKQ,IAAIwC,SAAS,EAAG,EAAGhD,KAAKS,OAAOf,MAAOM,KAAKS,OAAOjB,QACvDQ,KAAKiD,MAAQjD,KAAKQ,IAAI0C,aAAa,EAAG,EAAG,EAAGlD,KAAKS,OAAOjB,QACxDQ,KAAKmD,uCAEDzD,EAAOF,GACXQ,KAAKS,OAAOf,MAAQA,EACpBM,KAAKS,OAAOjB,OAASA,EACrB4D,qBAAqBpD,KAAKqD,eAC1BrD,KAAKQ,IAAIwC,SAAS,EAAG,EAAGhD,KAAKS,OAAOf,MAAOM,KAAKS,OAAOjB,QACvDQ,KAAKiD,MAAQjD,KAAKQ,IAAI0C,aAAa,EAAG,EAAG,EAAGlD,KAAKS,OAAOjB,QACxDQ,KAAKmD,sCAEU,IAAAtD,EAAAG,KAAdsD,EAAcC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAV,EAAGG,EAAOH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAH,EACJN,EAA4EjD,KAA5EiD,MAAOzC,EAAqER,KAArEQ,IADAmD,EACqE3D,KAAhES,OAAUf,EADfiE,EACejE,MAAOF,EADtBmE,EACsBnE,OADtBoE,EACqE5D,KAArCc,MAAS+C,EADzCD,EACyCC,WAAYhB,EADrDe,EACqDf,UACpE7C,KAAKqD,cAAgBS,sBAAsB,WACnCR,EAAI5D,IAAO4D,EAAI,GACnBxB,QAAQC,IAAIuB,GACZzD,EAAKsD,KAAKG,EAAGI,KAGjB,IADA,IAAIK,EAAYd,EAAMe,KACbC,EAAI,EAAGA,EAAIF,EAAUP,OAAQS,GAAK,EACnCJ,GAEAE,EAAUE,GAAKJ,EAAWI,GAC1BF,EAAUE,EAAI,GAAKJ,EAAWI,EAAI,GAClCF,EAAUE,EAAI,GAAKJ,EAAWI,EAAI,KAIlCF,EAAUE,GAAK,EACfF,EAAUE,EAAI,GAAK,EACnBF,EAAUE,EAAI,GAAK,GAG3BpB,EAAYS,IAAMA,EAAI,EACtB9C,EAAI0D,aAAalE,KAAKmE,eAAelB,EAAO,GAAIK,EAAGI,EAAG,EAAG,EAAGhE,EAAOF,0CAExD4E,EAAWpC,GAEtB,IADA,IAAIqC,EAASrE,KAAKQ,IAAI8D,gBAAgBF,EAAU1E,MAAQsC,EAAOoC,EAAU5E,OAASwC,GACzEuC,EAAM,EAAGA,EAAMH,EAAU5E,OAAQ+E,IACtC,IAAK,IAAIC,EAAM,EAAGA,EAAMJ,EAAU1E,MAAO8E,IAOrC,IANA,IAAIC,EAAc,CACdL,EAAUJ,KAAqC,GAA/BO,EAAMH,EAAU1E,MAAQ8E,GAAW,GACnDJ,EAAUJ,KAAqC,GAA/BO,EAAMH,EAAU1E,MAAQ8E,GAAW,GACnDJ,EAAUJ,KAAqC,GAA/BO,EAAMH,EAAU1E,MAAQ8E,GAAW,GACnDJ,EAAUJ,KAAqC,GAA/BO,EAAMH,EAAU1E,MAAQ8E,GAAW,IAE9Cd,EAAI,EAAGA,EAAI1B,EAAO0B,IAEvB,IADA,IAAIgB,EAAUH,EAAMvC,EAAQ0B,EACnBJ,EAAI,EAAGA,EAAItB,EAAOsB,IAEvB,IADA,IAAIqB,EAAUH,EAAMxC,EAAQsB,EACnBW,EAAI,EAAGA,EAAI,EAAGA,IACnBI,EAAOL,KAA0C,GAApCU,EAAUL,EAAO3E,MAAQiF,GAAeV,GACjDQ,EAAYR,GAOpC,OAAOI,mCAEF,IAAA7C,EAAAxB,KACL,OACImC,EAAAC,EAAAC,cAACuC,EAAD,CAAQrC,MAAO,CAAEsC,UAAW,6BAA+BtD,UAAW,SAAA5C,GAAQ6C,EAAKf,OAAS9B,GAAMoC,UAAWf,KAAM6C,UAAW7C,KAAKc,MAAM+B,mBA1E3HJ,+BCFpBqC,cACJ,SAAAA,IAAc,IAAAjF,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8E,IACZjF,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAgF,GAAA3E,KAAAH,QAMF+E,aAAe,WAAM,IAAA1E,EAAAP,OAAAQ,EAAA,EAAAR,CAAAD,GACXiB,EADWT,EACXS,MAAOkE,EADI3E,EACJ2E,OACfnF,EAAKc,SAAS,CAAEsE,SAAS,IACzB,IAAMtG,EAAK,IAAIuG,MACTC,EAAOtF,EAAKlB,GAAGyG,MAAM,GACvBD,EACFH,EAAOK,cAAcF,GAErBxG,EAAG2G,IAAM,GAEXN,EAAOO,UAAY,WACjB5G,EAAG2G,IAAMN,EAAOQ,OAChB1E,EAAM2E,gBAAgB,CAAEC,KAAMP,EAAKO,KAAM/G,OACzCkB,EAAKc,SAAS,CAAEsE,SAAS,MAlB3BpF,EAAKa,MAAQ,CACXuE,SAAS,GAEXpF,EAAKmF,OAAS,IAAIW,WALN9F,wEAuBL,IAAA2B,EAAAxB,KACCU,EAAUV,KAAVU,MACR,OACEyB,EAAAC,EAAAC,cAACF,EAAAC,EAAMwD,SAAP,KACEzD,EAAAC,EAAAC,cAACwD,EAAA,EAAD,CAASC,MAAM,gBACb3D,EAAAC,EAAAC,cAAC0D,EAAA,EAAD,CACEC,KAAK,QACLC,MAAM,SACNC,KAAK,SACLjB,QAASvE,EAAMuE,QACfkB,QAAS,kBAAM3E,EAAK7C,GAAGyH,YAG3BjE,EAAAC,EAAAC,cAAA,SACEgE,OAAO,UACP/D,IAAK,SAAA3D,GAAE,OAAI6C,EAAK7C,GAAKA,GAAI2H,KAAK,OAAO/D,MAAO,CAAEgE,QAAS,QACvDC,SAAU,kBAAMhF,EAAKuD,0BAxCRtC,aCDVgE,EAAa,SAAC3F,GACvB,OACIqB,EAAAC,EAAAC,cAACwD,EAAA,EAAD,CAASC,MAAM,kBACX3D,EAAAC,EAAAC,cAAC0D,EAAA,EAADjG,OAAA4G,OAAA,GACQ5F,EADR,CAEIkF,KAAK,QACLC,MAAM,SACNC,KAAK,gBCPRS,EAAe,SAAC7F,GACzB,OACIqB,EAAAC,EAAAC,cAACwD,EAAA,EAAD,CAASC,MAAOhF,EAAM+B,UAAY,QAAU,QACxCV,EAAAC,EAAAC,cAAC0D,EAAA,EAADjG,OAAA4G,OAAA,GACQ5F,EADR,CAEIkF,KAAK,QACLC,MAAM,SACNC,KAAMpF,EAAM+B,UAAY,eAAiB,cACzCsD,QAASrF,EAAM8F,8CCNlBC,EAAW,SAAC/F,GAAU,IAE3B2E,EAMA3E,EANA2E,gBACAqB,EAKAhG,EALAgG,aACAF,EAIA9F,EAJA8F,eACA/D,EAGA/B,EAHA+B,UACAkE,EAEAjG,EAFAiG,aACAC,EACAlG,EADAkG,WAEJ,OACI7E,EAAAC,EAAAC,cAAC4E,EAAA,EAAD,CACI1E,MAAOzB,EAAMyB,MACb2E,OACI/E,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,OAAKE,MAAO,CAAEgE,QAAS,OAAQY,eAAgB,iBAC3ChF,EAAAC,EAAAC,cAAC+E,EAAD,CAAU3B,gBAAiBA,IAC3BtD,EAAAC,EAAAC,cAACgF,EAAD,CACIC,UAAWP,EACXH,eAAgBA,EAChB/D,UAAWA,IAEfV,EAAAC,EAAAC,cAACkF,EAAD,MACEzG,EAAMmE,QAAU9C,EAAAC,EAAAC,cAACmF,EAAA,EAAD,MAAW,MAEhCT,EAAe5E,EAAAC,EAAAC,cAAA,OAAKE,MAAO,CAAEkF,UAAW,SAAUC,UAAW,OAAQvF,EAAAC,EAAAC,cAAC6D,EAAA,EAAD,CAAMI,KAAK,UAAjE,IAA6ES,EAAarB,MAAc,MAGhIiC,UAAQ,EACRX,WAAYA,EACZY,WAAY,SAAAzC,GAAI,OACZhD,EAAAC,EAAAC,cAAC4E,EAAA,EAAKY,KAAN,KACI1F,EAAAC,EAAAC,cAAC0D,EAAA,EAAD,CACI+B,OAAK,EACLvF,MAAO,CAAEwF,OAAQ,UACjB5B,QAAS,kBAAMW,EAAa3B,KAC5BhD,EAAAC,EAAAC,cAAC4E,EAAA,EAAKY,KAAKG,KAAX,CACIC,OAAQ9F,EAAAC,EAAAC,cAAA,OAAK3C,MAAO,GAAIF,OAAQ,GAAI8F,IAAI,wDACxCQ,MAAOX,EAAKO,aCxC3BwC,ECAO,SAACpH,GACjB,IAAMqH,EAAUrI,OAAAc,EAAA,EAAAd,CAAA,CACZyG,QAAS,OACT6B,oBAAmB,UAAAC,OAAYvH,EAAMwH,KAAlB,UACnBC,iBAAgB,UAAAF,OAAYvH,EAAM0H,KAAlB,WACb1H,EAAMyB,OAILiG,EAAe1H,EAAf0H,KAAMF,EAASxH,EAATwH,KACd,OACInG,EAAAC,EAAAC,cAAA,OAAKoG,UAAU,OAAOlG,MAAO4F,GAErBO,IAAMC,SAASC,IAAI9H,EAAM+H,SAAU,SAACtE,EAAKuE,GAAN,OAAaJ,IAAMK,aAAaxE,EAAK,CAAEuE,GAAIA,EAAK,EAAGN,KAAMA,EAAO,EAAGF,KAAMA,EAAO,QDbtHJ,EEAW,SAACpH,GACrB,IAAMkI,EAAclJ,OAAAc,EAAA,EAAAd,CAAA,GACbgB,EAAMmI,SAAW,CAAEC,aAAcpI,EAAMmI,UAAa,CAAEC,aAAcpI,EAAMgI,IAC1EhI,EAAMqI,OAAS,CAAEC,WAAYtI,EAAMqI,OAAS,GAAM,KAClDrI,EAAMuI,SAAW,CAAEC,gBAAiBxI,EAAMuI,UAAa,CAAEC,gBAAiB,GAC1ExI,EAAMyI,OAAS,CAAEC,cAAe1I,EAAMyI,OAAS,GAAM,CAAEC,cAAe1I,EAAMwH,MAC5ExH,EAAMyB,OAEb,OACIJ,EAAAC,EAAAC,cAAA,OAAKE,MAAOyG,GACPlI,EAAM+H,WCRbY,aACF,SAAAA,IAAe3J,OAAAC,EAAA,EAAAD,CAAAE,KAAAyJ,GACXzJ,KAAKoF,MAAQ,GACbpF,KAAK0J,KAAO1J,KAAK0J,KAAKC,KAAK3J,MAC3BA,KAAK4J,cAAgB5J,KAAK4J,cAAcD,KAAK3J,iEAG7C,IAAKA,KAAK6J,KACN,IACI/H,QAAQC,IAAI,4BACZ/B,KAAK6J,KAAO,IAAKjL,OAAOkL,cAAgBlL,OAAOmL,oBACjD,MAAOC,GACLlI,QAAQC,IAAR,6DAA0EiI,qCAI7E7E,GACLnF,KAAKiK,eADM,IAEHJ,EAAS7J,KAAT6J,KACR,IACI7J,KAAKkK,SAAWL,EAAKM,iBACrBnK,KAAKoK,UAAY,IAAIC,WAAWrK,KAAKkK,SAASI,mBAC9CtK,KAAKuK,OAASV,EAAKW,yBAAyBrF,EAAKxG,IAHjD,IAIQuL,EAAgClK,KAAhCkK,SAAUK,EAAsBvK,KAAtBuK,OAAQH,EAAcpK,KAAdoK,UAC1BF,EAASO,QAAU,MACnBP,EAASQ,aAAe,IACxBR,EAASS,aAAe,GACxBT,EAASU,QAAQf,EAAKgB,aACtBN,EAAOK,QAAQ5K,KAAKkK,UACpBlK,KAAKoF,MAAM0F,KAAK,CAAE3F,OAAM+E,WAAUK,SAAQH,cAC5C,MAAOJ,GACLlI,QAAQC,IAAI,0BAA2BiI,iCAG1Ce,GACD/K,KAAKoF,MAAM2F,GAAO5F,KAAKxG,GAAG+K,OAC1B1J,KAAK4J,cAAcmB,yCAETA,GAEV,OADA/K,KAAKoF,MAAM2F,GAAOb,SAASc,qBAAqBhL,KAAKoF,MAAM2F,GAAOX,WAC3DpK,KAAKoF,MAAM2F,GAAOX,uCAExBW,GACD/K,KAAKoF,MAAM2F,GAAO5F,KAAKxG,GAAGsM,QAC1BjL,KAAKoF,MAAM2F,GAAO5F,KAAKxG,GAAGuM,YAAc,WC1CxCC,EAAmBjD,EAAbkD,EAAalD,EAwEZmD,cAtEb,SAAAA,IAAc,IAAAxL,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAqL,IACZxL,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAuL,GAAAlL,KAAAH,QACKU,MAAQ,CACX0E,MAAO,GACPvC,WAAW,GAEbhD,EAAK4J,YAAc,IAAIA,EACvB5J,EAAK6J,KAAO7J,EAAK6J,KAAKC,KAAV7J,OAAAQ,EAAA,EAAAR,CAAAD,IACZA,EAAKyL,KAAOzL,EAAKyL,KAAK3B,KAAV7J,OAAAQ,EAAA,EAAAR,CAAAD,IACZA,EAAK4F,gBAAkB5F,EAAK4F,gBAAgBkE,KAArB7J,OAAAQ,EAAA,EAAAR,CAAAD,IACvBA,EAAK+G,eAAiB/G,EAAK+G,eAAe+C,KAApB7J,OAAAQ,EAAA,EAAAR,CAAAD,IACtBA,EAAKiH,aAAejH,EAAKiH,aAAa6C,KAAlB7J,OAAAQ,EAAA,EAAAR,CAAAD,IACpBA,EAAK0L,iBAAmB1L,EAAK0L,iBAAiB5B,KAAtB7J,OAAAQ,EAAA,EAAAR,CAAAD,IAZZA,+EAcEsF,GAAM,IAAA3D,EAAAxB,KAChBwL,EAAQ1L,OAAAc,EAAA,EAAAd,CAAA,GAAQqF,EAAR,CAAc4F,MAAO/K,KAAKU,MAAM0E,MAAM5B,SAC9C4B,EAAQpF,KAAKU,MAAM0E,MAAMiD,OAAjBvI,OAAAc,EAAA,EAAAd,CAAA,GAA6B0L,IACrCzE,EAAe/G,KAAKU,MAAMqG,aAAe/G,KAAKU,MAAMqG,aAAeyE,EACvExL,KAAKW,SAAS,CAAEyE,QAAO2B,gBAAiB,kBAAMvF,EAAKiI,YAAYgC,SAAStG,oCAEnE,IACGsE,EAA2DzJ,KAA3DyJ,YAAa8B,EAA8CvL,KAA9CuL,iBAA2BxE,EAAmB/G,KAA5BU,MAASqG,aAChDwE,EAAiBxE,EAAagE,OAC9BtB,EAAYC,KAAK3C,EAAagE,sCAEzB,IACGtB,EAAuDzJ,KAAvDyJ,YAAsB1C,EAAiC/G,KAA1CU,MAASqG,aAAgB2E,EAAiB1L,KAAjB0L,aAC9CtI,qBAAqBsI,GACrBjC,EAAY6B,KAAKvE,EAAagE,OAC9B/K,KAAKW,SAAS,CAAEkD,WAAY,8CAEb,IACP6F,EAAqC1J,KAArC0J,KAAM4B,EAA+BtL,KAA/BsL,KAAezI,EAAgB7C,KAAzBU,MAASmC,UAC7B7C,KAAKW,SAAS,CAAEkC,WAAYA,GAAa,WACnCA,EACFyI,IAEA5B,+CAIWqB,GAAO,IACdtB,EAAkCzJ,KAAlCyJ,YAAa8B,EAAqBvL,KAArBuL,iBACrBvL,KAAKW,SAAS,CAAEkD,WAAY4F,EAAYG,cAAcmB,KACtD/K,KAAK0L,aAAe5H,sBAAsB,kBAAMyH,EAAiBR,0CAEtD5F,GACXnF,KAAKW,SAAS,CAAEoG,aAAc5B,qCAG9B,OACEhD,EAAAC,EAAAC,cAACsJ,EAAD,CAAMrD,KAAM,EAAGE,KAAM,GACnBrG,EAAAC,EAAAC,cAACuJ,EAAD,CAAUrJ,MAAO,CAAE/C,OAAQ,SACzB2C,EAAAC,EAAAC,cAACwJ,EAAD,CAAahI,WAAY7D,KAAKU,MAAMmD,WAAYhB,UAAW7C,KAAKU,MAAMmC,aAExEV,EAAAC,EAAAC,cAACuJ,EAAD,CAAUrJ,MAAO,CAAE/C,OAAQ,SACzB2C,EAAAC,EAAAC,cAACyJ,EAAD,CACE/E,aAAc/G,KAAKU,MAAMqG,aACzBtB,gBAAiBzF,KAAKyF,gBACtBmB,eAAgB5G,KAAK4G,eACrBE,aAAc9G,KAAK8G,aACnBjE,UAAW7C,KAAKU,MAAMmC,UACtBmE,WAAYhH,KAAKU,MAAM0E,iBA/DjB3C,oBCFlBsJ,IAASC,OAAO7J,EAAAC,EAAAC,cAAC4J,EAAD,MAASpN,SAASqN,eAAe","file":"static/js/main.eac75d8b.chunk.js","sourcesContent":["const parseNumber = prop => parseFloat(prop) || 0;\n\nconst getSize = (el) => {\n  if (el === window || el === document.body) {\n    return [window.innerWidth, window.innerHeight];\n  }\n\n  let temporary = false;\n\n  if (!el.parentNode && document.body) {\n    temporary = true;\n    document.body.appendChild(el);\n  }\n\n  const rect = el.getBoundingClientRect();\n  const styles = getComputedStyle(el);\n  const height =\n    (rect.height | 0) +\n    parseNumber(styles.getPropertyValue('margin-top')) +\n    parseNumber(styles.getPropertyValue('margin-bottom'));\n  const width =\n    (rect.width | 0) +\n    parseNumber(styles.getPropertyValue('margin-left')) +\n    parseNumber(styles.getPropertyValue('margin-right'));\n\n  if (temporary && document.body) {\n    document.body.removeChild(el);\n  }\n\n  return [width, height];\n};\n\nexport default getSize;","import React, { Component } from 'react';\nimport getSize from './getSize';\n\nclass ResponsiveCanvas extends Component {\n    constructor() {\n        super();\n        this.state = {\n            width: 0,\n            height: 0\n        };\n    }\n    componentDidMount() {\n        this.setState({ ...this.setSize() }, () => {\n            window.addEventListener('resize', this.handleResize, false);\n            this.ctx = this.canvas.getContext('2d');\n            const { ctx, canvas } = this;\n            const { width, height } = this.state;\n            this.props.canvasApp.init(ctx, canvas, width, height);\n        });\n    }\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.handleResize, false);\n    }\n    handleResize = () => {\n        const { ctx, canvas } = this;\n        const { width, height } = this.state;\n        this.setState({ ...this.setSize() }, () => {\n            this.props.canvasApp.setSize(width, height)\n            // Add custom events with this.props.onResize();\n        });\n    }\n    setSize = () => {\n        const parent = this.canvas.parentElement;\n        if (!parent) return;\n        const [width, height] = getSize(parent);\n        return { width, height };\n    }\n    setRef = (el) => {\n        if (!el) return\n        const { createRef } = this.props;\n        this.canvas = el;\n        if (typeof canvasRef === 'function') {\n            createRef(el);\n        }\n    };\n    render() {\n        console.log(this.props)\n\n        const scale = window.devicePixelRatio || 1;\n        const { width, height } = this.state;\n        return (\n            <canvas\n                ref={this.setRef}\n                width={width * scale}\n                height={height * scale}\n                style={{ width, height, ...this.props.style, border: '1px solid' }}\n            />\n        )\n    }\n}\n\nconst Canvas = (props) => {\n    return (\n        <ResponsiveCanvas\n            style={{ ...props.style, }}\n            canvasRef={el => { this.canvas = el }}\n            canvasApp={props.canvasApp}\n            isPlaying={props.isPlaying}\n        />\n    )\n}\n\n\nexport { Canvas };","import React, { Component } from 'react';\nimport { Canvas } from '../Canvas';\n// import { Spectrogram as Sonogram } from './app';\n\n\n\nclass Spectrogram extends Component {\n    constructor() {\n        super();\n    }\n    init(ctx, canvas, width, height) {\n        this.ctx = ctx;\n        this.canvas = canvas;\n        this.canvas.width = width;\n        this.canvas.height = height;\n        this.ctx.fillStyle = 'black';\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        this.slice = this.ctx.getImageData(0, 0, 1, this.canvas.height);\n        this.draw()\n    }\n    setSize(width, height) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n        cancelAnimationFrame(this.animationLoop);\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        this.slice = this.ctx.getImageData(0, 0, 1, this.canvas.height);\n        this.draw();\n    }\n    draw(x = 0, y = 0) {\n        const { slice, ctx, canvas: { width, height }, props: { streamData, isPlaying } } = this;\n        this.animationLoop = requestAnimationFrame(() => {\n            if (x > width) x = 0;\n            console.log(x)\n            this.draw(x, y);\n        });\n        let sliceData = slice.data;\n        for (let i = 0; i < sliceData.length; i += 4) {\n            if (streamData) {\n                // Main\n                sliceData[i] = streamData[i]\n                sliceData[i + 1] = streamData[i + 1]\n                sliceData[i + 2] = streamData[i + 2]\n\n            } else {\n                // Standby\n                sliceData[i] = 0;\n                sliceData[i + 1] = 0;\n                sliceData[i + 2] = 0;\n            }\n        }\n        isPlaying ? x++ : x = 0;\n        ctx.putImageData(this.scaleImageData(slice, 2), x, y, 0, 0, width, height);\n    }\n    scaleImageData(imageData, scale) {\n        let scaled = this.ctx.createImageData(imageData.width * scale, imageData.height * scale);\n        for (let row = 0; row < imageData.height; row++) {\n            for (let col = 0; col < imageData.width; col++) {\n                let sourcePixel = [\n                    imageData.data[(row * imageData.width + col) * 4 + 0],\n                    imageData.data[(row * imageData.width + col) * 4 + 1],\n                    imageData.data[(row * imageData.width + col) * 4 + 2],\n                    imageData.data[(row * imageData.width + col) * 4 + 3]\n                ];\n                for (let y = 0; y < scale; y++) {\n                    let destRow = row * scale + y;\n                    for (let x = 0; x < scale; x++) {\n                        let destCol = col * scale + x;\n                        for (let i = 0; i < 4; i++) {\n                            scaled.data[(destRow * scaled.width + destCol) * 4 + i] =\n                                sourcePixel[i];\n                        }\n                    }\n                }\n            }\n        }\n\n        return scaled;\n    }\n    render() {\n        return (\n            <Canvas style={{ transform: 'rotate(180deg) scaleX(-1)' }} canvasRef={el => { this.canvas = el }} canvasApp={this} isPlaying={this.props.isPlaying} />\n        )\n    }\n}\n\n\n\n\nexport { Spectrogram };","\nimport React, { Component } from 'react';\nimport { Button, Tooltip } from 'antd';\n\nclass Uploader extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false\n    }\n    this.reader = new FileReader();\n  }\n  handleUpload = () => {\n    const { props, reader } = this;\n    this.setState({ loading: true });\n    const el = new Audio();\n    const file = this.el.files[0];\n    if (file) {\n      reader.readAsDataURL(file);\n    } else {\n      el.src = \"\";\n    }\n    reader.onloadend = () => {\n      el.src = reader.result;\n      props.onUploadSuccess({ name: file.name, el });\n      this.setState({ loading: false });\n    }\n  }\n  render() {\n    const { state } = this;\n    return (\n      <React.Fragment>\n        <Tooltip title='upload audio'>\n          <Button\n            size='small'\n            shape='circle'\n            icon='upload'\n            loading={state.loading}\n            onClick={() => this.el.click()}\n          />\n        </Tooltip>\n        <input\n          accept='audio/*'\n          ref={el => this.el = el} type=\"file\" style={{ display: 'none' }}\n          onChange={() => this.handleUpload()}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\nexport { Uploader }","import React from 'react';\nimport { Button, Tooltip } from 'antd';\n\nexport const Downloader = (props) => {\n    return (\n        <Tooltip title='download image'>\n            <Button\n                {...props}\n                size='small'\n                shape='circle'\n                icon='download'\n            />\n        </Tooltip>\n    )\n}","import React from 'react';\nimport { Button, Tooltip } from 'antd';\n\nexport const PlaybackCtrl = (props) => {\n    return (\n        <Tooltip title={props.isPlaying ? 'pause' : 'play'}>\n            <Button\n                {...props}\n                size='small'\n                shape='circle'\n                icon={props.isPlaying ? 'pause-circle' : 'play-circle'}\n                onClick={props.handlePlayback}\n            />\n        </Tooltip>\n    )\n}","import React from 'react';\nimport { Uploader, Downloader, PlaybackCtrl } from '../';\nimport { List, Button, Icon } from 'antd';\nimport { Spin } from 'antd';\n\nexport const FileList = (props) => {\n    const {\n        onUploadSuccess,\n        handleSelect,\n        handlePlayback,\n        isPlaying,\n        selectedFile,\n        dataSource\n    } = props;\n    return (\n        <List\n            style={props.style}\n            header={\n                <div>\n                    <div style={{ display: 'flex', justifyContent: 'space-evenly' }}>\n                        <Uploader onUploadSuccess={onUploadSuccess} />\n                        <PlaybackCtrl\n                            disabled={!selectedFile}\n                            handlePlayback={handlePlayback}\n                            isPlaying={isPlaying}\n                        />\n                        <Downloader />\n                        { props.loading ? <Spin /> : null }\n                    </div>\n                    {selectedFile ? <div style={{ textAlign: 'center', marginTop: '2%' }}><Icon type='sound' /> {selectedFile.name}</div> : null}\n                </div>\n            }\n            bordered\n            dataSource={dataSource}\n            renderItem={file => (\n                <List.Item>\n                    <Button\n                        block\n                        style={{ margin: '0 auto' }}\n                        onClick={() => handleSelect(file)}>\n                        <List.Item.Meta\n                            avatar={<img width={25} height={25} src=\"https://www.svgrepo.com/show/8210/musical-notes.svg\" />}\n                            title={file.name}\n                        />\n                    </Button>\n                </List.Item>\n            )}\n        />\n    )\n}","import { Grid } from './Grid';\nimport { GridItem } from './GridItem';\nexport const GridSystem = { Grid, GridItem };","import React from 'react';\n\nexport const Grid = (props) => {\n    const GridStyles = {\n        display: 'grid',\n        gridTemplateColumns: `repeat(${props.cols}, 1fr)`,\n        gridTemplateRows: `repeat(${props.rows}, 1fr)`,\n        ...props.style,\n        // gridRowGap: props.gridRowGap,\n        // gridColumnGap: props.gridColGap,\n    }\n    const { rows, cols } = props;\n    return (\n        <div className='grid' style={GridStyles}>\n            {\n                React.Children.map(props.children, (row, id) => React.cloneElement(row, { id: id + 1, rows: rows + 1, cols: cols + 1 }))\n            }\n        </div>\n    );\n}","import React from 'react';\n\nexport const GridItem = (props) => {\n    const GridItemStyles = {\n        ...props.rowStart ? { gridRowStart: props.rowStart } : { gridRowStart: props.id },\n        ...props.rowEnd ? { gridRowEnd: props.rowEnd + 1 } : null,\n        ...props.colStart ? { gridColumnStart: props.colStart } : { gridColumnStart: 1 },\n        ...props.colEnd ? { gridColumnEnd: props.colEnd + 1 } : { gridColumnEnd: props.cols },\n        ...props.style\n    }\n    return (\n        <div style={GridItemStyles}>\n            {props.children}\n        </div>\n    );\n}","/* AUDIOSTREAM\n*  API for audio playback and analysis.\n*/\n\nclass AudioStream {\n    constructor() {\n        this.files = [];\n        this.play = this.play.bind(this);\n        this.getStreamData = this.getStreamData.bind(this)\n    }\n    checkContext() {\n        if (!this.actx) {\n            try {\n                console.log('New context instantiated')\n                this.actx = new (window.AudioContext || window.webkitAudioContext)();\n            } catch (e) {\n                console.log(`Sorry, but your browser doesn't support the Web Audio API!`, e);\n            }\n        }\n    }\n    fromFile(file) {\n        this.checkContext();\n        const { actx } = this;\n        try {\n            this.analyser = actx.createAnalyser();\n            this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n            this.source = actx.createMediaElementSource(file.el);\n            const { analyser, source, dataArray } = this;\n            analyser.fftSize = 16384;\n            analyser.minDecibels = -120;\n            analyser.maxDecibels = -15;\n            analyser.connect(actx.destination);\n            source.connect(this.analyser);\n            this.files.push({ file, analyser, source, dataArray })\n        } catch (e) {\n            console.log('Failed to make stream: ', e);\n        }\n    }\n    play(index) {\n        this.files[index].file.el.play();\n        this.getStreamData(index);\n    }\n    getStreamData(index) {\n        this.files[index].analyser.getByteFrequencyData(this.files[index].dataArray)\n        return this.files[index].dataArray\n    }\n    stop(index) {\n        this.files[index].file.el.pause();\n        this.files[index].file.el.currentTime = 0;\n    }\n}\n\nexport { AudioStream }","/* APP\n*  The main page.\n*/\nimport React, { Component } from 'react';\nimport { Spectrogram, FileList, GridSystem } from './components';\nimport { AudioStream } from './AudioStream';\nconst { Grid, GridItem } = GridSystem;\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      files: [],\n      isPlaying: false\n    }\n    this.AudioStream = new AudioStream();\n    this.play = this.play.bind(this);\n    this.stop = this.stop.bind(this);\n    this.onUploadSuccess = this.onUploadSuccess.bind(this);\n    this.handlePlayback = this.handlePlayback.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.handleStreamData = this.handleStreamData.bind(this);\n  }\n  onUploadSuccess(file) {\n    let incoming = { ...file, index: this.state.files.length };\n    let files = this.state.files.concat({ ...incoming });\n    let selectedFile = this.state.selectedFile ? this.state.selectedFile : incoming;\n    this.setState({ files, selectedFile  }, () => this.AudioStream.fromFile(file));\n  }\n  play() {\n    const { AudioStream, handleStreamData, state: { selectedFile } } = this;\n    handleStreamData(selectedFile.index);\n    AudioStream.play(selectedFile.index)\n  }\n  stop() {\n    const { AudioStream, state: { selectedFile }, analyserLoop } = this;\n    cancelAnimationFrame(analyserLoop);\n    AudioStream.stop(selectedFile.index);\n    this.setState({ streamData: [] })\n  }\n  handlePlayback() {\n    const { play, stop, state: { isPlaying } } = this;\n    this.setState({ isPlaying: !isPlaying }, () => {\n      if (isPlaying) {\n        stop();\n      } else {\n        play();\n      }\n    });\n  }\n  handleStreamData(index) {\n    const { AudioStream, handleStreamData } = this;\n    this.setState({ streamData: AudioStream.getStreamData(index) });\n    this.analyserLoop = requestAnimationFrame(() => handleStreamData(index));\n  }\n  handleSelect(file) {\n    this.setState({ selectedFile: file });\n  }\n  render() {\n    return (\n      <Grid cols={8} rows={2}>\n        <GridItem style={{ height: '50vh' }}>\n          <Spectrogram streamData={this.state.streamData} isPlaying={this.state.isPlaying} />\n        </GridItem>\n        <GridItem style={{ height: '50vh' }}>\n          <FileList\n            selectedFile={this.state.selectedFile}\n            onUploadSuccess={this.onUploadSuccess}\n            handlePlayback={this.handlePlayback}\n            handleSelect={this.handleSelect}\n            isPlaying={this.state.isPlaying}\n            dataSource={this.state.files}\n          />\n        </GridItem>\n      </Grid>\n    );\n  }\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'antd/dist/antd.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}